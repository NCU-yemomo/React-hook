{"ast":null,"code":"var _s = $RefreshSig$();\nimport React from 'react';\nimport { useState, useEffect } from \"react\";\nfunction App(props) {\n  _s();\n  //设置空状态\n  const [isOnline, setIsOnline] = useState(null);\n  function handleStatusChange(status) {\n    setOnline(status.inOnline);\n  }\n  //useEffect可以返回一个函数清除副作用\n  //React 会在组件销毁时取消对 ChatAPI 的订阅\n  useEffect(() => {\n    ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);\n    return () => {\n      ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);\n    };\n  });\n  if (isOnline === null) {\n    return 'Loading...';\n  }\n  return isOnline ? 'Online' : 'Offline';\n}\n_s(App, \"6npkVQY8VG4F1Zx+IOKgnjwKqEQ=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","App","props","isOnline","setIsOnline","handleStatusChange","status","setOnline","inOnline","ChatAPI","subscribeToFriendStatus","friend","id","unsubscribeFromFriendStatus"],"sources":["C:/Users/颜宇航/Desktop/学习文件/web学习/ReactHook/src/App.jsx"],"sourcesContent":["import React from 'react'\r\nimport {useState,useEffect} from \"react\"\r\nfunction App(props){\r\n    //设置空状态\r\n    const [isOnline,setIsOnline]=useState(null)\r\n\r\n    function handleStatusChange(status){\r\n    \r\n        setOnline(status.inOnline)\r\n    }\r\n    //useEffect可以返回一个函数清除副作用\r\n    //React 会在组件销毁时取消对 ChatAPI 的订阅\r\n    useEffect(()=>{\r\n        ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);\r\n        return () => {\r\n          ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);\r\n        };\r\n    })\r\n    if (isOnline === null) {\r\n        return 'Loading...';\r\n      }\r\n      return isOnline ? 'Online' : 'Offline';\r\n}\r\nexport default App\r\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAAQC,QAAQ,EAACC,SAAS,QAAO,OAAO;AACxC,SAASC,GAAG,CAACC,KAAK,EAAC;EAAA;EACf;EACA,MAAM,CAACC,QAAQ,EAACC,WAAW,CAAC,GAACL,QAAQ,CAAC,IAAI,CAAC;EAE3C,SAASM,kBAAkB,CAACC,MAAM,EAAC;IAE/BC,SAAS,CAACD,MAAM,CAACE,QAAQ,CAAC;EAC9B;EACA;EACA;EACAR,SAAS,CAAC,MAAI;IACVS,OAAO,CAACC,uBAAuB,CAACR,KAAK,CAACS,MAAM,CAACC,EAAE,EAAEP,kBAAkB,CAAC;IACpE,OAAO,MAAM;MACXI,OAAO,CAACI,2BAA2B,CAACX,KAAK,CAACS,MAAM,CAACC,EAAE,EAAEP,kBAAkB,CAAC;IAC1E,CAAC;EACL,CAAC,CAAC;EACF,IAAIF,QAAQ,KAAK,IAAI,EAAE;IACnB,OAAO,YAAY;EACrB;EACA,OAAOA,QAAQ,GAAG,QAAQ,GAAG,SAAS;AAC5C;AAAC,GApBQF,GAAG;AAAA,KAAHA,GAAG;AAqBZ,eAAeA,GAAG;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}